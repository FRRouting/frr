/***bfd.h:BFDdefinitionsandstructures**@copyrightCopyright(C)2015CumulusNetworks
,Inc.**ThisfileispartofGNUZebra.**GNUZebraisfreesoftware;youcanredistributeitand
/ormodifyit*underthetermsoftheGNUGeneralPublicLicenseaspublishedbythe*FreeSoftwa
reFoundation;eitherversion2,or(atyouroption)any*laterversion.**GNUZebraisdistrib
utedinthehopethatitwillbeuseful,but*WITHOUTANYWARRANTY;withouteventheimpliedwarr
antyof*MERCHANTABILITYorFITNESSFORAPARTICULARPURPOSE.SeetheGNU*GeneralPublicLice
nseformoredetails.**YoushouldhavereceivedacopyoftheGNUGeneralPublicLicensealong*
withthisprogram;seethefileCOPYING;ifnot,writetotheFreeSoftware*Foundation,Inc.,5
1FranklinSt,FifthFloor,Boston,MA02110-1301USA*/#ifndef_ZEBRA_BFD_H#define_ZEBRA_
BFD_H#include"lib/json.h"#defineBFD_DEF_MIN_RX300#defineBFD_MIN_MIN_RX50#defineB
FD_MAX_MIN_RX60000#defineBFD_DEF_MIN_TX300#defineBFD_MIN_MIN_TX50#defineBFD_MAX_
MIN_TX60000#defineBFD_DEF_DETECT_MULT3#defineBFD_MIN_DETECT_MULT2#defineBFD_MAX_
DETECT_MULT255#defineBFD_GBL_FLAG_IN_SHUTDOWN(1<<0)/*Thedaemoninshutdown*/struct
bfd_gbl{uint16_tflags;};#defineBFD_FLAG_PARAM_CFG(1<<0)/*parametershavebeenconfi
gured*/#defineBFD_FLAG_BFD_REG(1<<1)/*PeerregisteredwithBFD*/#defineBFD_FLAG_BFD
_TYPE_MULTIHOP(1<<2)/*PeerregisteredwithBFDasmultihop*/#defineBFD_STATUS_UNKNOWN
(1<<0)/*BFDsessionstatusneverreceived*/#defineBFD_STATUS_DOWN(1<<1)/*BFDsessions
tatusisdown*/#defineBFD_STATUS_UP(1<<2)/*BFDsessionstatusisup*/enumbfd_sess_type
{BFD_TYPE_NOT_CONFIGURED,BFD_TYPE_SINGLEHOP,BFD_TYPE_MULTIHOP};structbfd_info{ui
nt16_tflags;uint8_tdetect_mult;uint32_tdesired_min_tx;uint32_trequired_min_rx;ti
me_tlast_update;uint8_tstatus;enumbfd_sess_typetype;};externstructbfd_info*bfd_i
nfo_create(void);externvoidbfd_info_free(structbfd_info**bfd_info);externintbfd_
validate_param(structvty*vty,constchar*dm_str,constchar*rx_str,constchar*tx_str,
uint8_t*dm_val,uint32_t*rx_val,uint32_t*tx_val);externvoidbfd_set_param(structbf
d_info**bfd_info,uint32_tmin_rx,uint32_tmin_tx,uint8_tdetect_mult,intdefaults,in
t*command);externvoidbfd_peer_sendmsg(structzclient*zclient,structbfd_info*bfd_i
nfo,intfamily,void*dst_ip,void*src_ip,char*if_name,intttl,intmultihop,intcommand
,intset_flag,vrf_id_tvrf_id);externconstchar*bfd_get_command_dbg_str(intcommand)
;externstructinterface*bfd_get_peer_info(structstream*s,structprefix*dp,structpr
efix*sp,int*status,vrf_id_tvrf_id);constchar*bfd_get_status_str(intstatus);exter
nvoidbfd_show_param(structvty*vty,structbfd_info*bfd_info,intbfd_tag,intextra_sp
ace,uint8_tuse_json,json_object*json_obj);externvoidbfd_show_info(structvty*vty,
structbfd_info*bfd_info,intmultihop,intextra_space,uint8_tuse_json,json_object*j
son_obj);externvoidbfd_client_sendmsg(structzclient*zclient,intcommand);externvo
idbfd_gbl_init(void);externvoidbfd_gbl_exit(void);#endif/*_ZEBRA_BFD_H*/