/**libfrroverallmanagementfunctions**Copyright(C)2016DavidLamparterforNetDEF,Inc
.**Thisprogramisfreesoftware;youcanredistributeitand/ormodifyit*underthetermsoft
heGNUGeneralPublicLicenseaspublishedbytheFree*SoftwareFoundation;eitherversion2o
ftheLicense,or(atyouroption)*anylaterversion.**Thisprogramisdistributedinthehope
thatitwillbeuseful,butWITHOUT*ANYWARRANTY;withouteventheimpliedwarrantyofMERCHAN
TABILITYor*FITNESSFORAPARTICULARPURPOSE.SeetheGNUGeneralPublicLicensefor*moredet
ails.**YoushouldhavereceivedacopyoftheGNUGeneralPublicLicensealong*withthisprogr
am;seethefileCOPYING;ifnot,writetotheFreeSoftware*Foundation,Inc.,51FranklinSt,F
ifthFloor,Boston,MA02110-1301USA*/#ifndef_ZEBRA_FRR_H#define_ZEBRA_FRR_H#include
"sigevent.h"#include"privs.h"#include"thread.h"#include"log.h"#include"getopt.h"
#include"module.h"#include"hook.h"#defineFRR_NO_PRIVSEP(1<<0)#defineFRR_NO_TCPVT
Y(1<<1)#defineFRR_LIMITED_CLI(1<<2)#defineFRR_NO_CFG_PID_DRY(1<<3)#defineFRR_NO_
ZCLIENT(1<<4)structfrr_daemon_info{unsignedflags;constchar*progname;constchar*na
me;constchar*logname;unsignedshortinstance;structfrrmod_runtime*module;char*vty_
addr;intvty_port;char*vty_sock_path;booldryrun;booldaemon_mode;boolterminal;cons
tchar*config_file;constchar*pid_file;constchar*vty_path;constchar*module_path;co
nstchar*pathspace;constchar*proghelp;void(*printhelp)(FILE*target);constchar*cop
yright;charstartinfo[128];structquagga_signal_t*signals;size_tn_signals;structze
bra_privs_t*privs;};/*execnameisthedaemon'sexecutable(andpidfileandconfigfile)na
me,*i.e."zebra"or"bgpd"*constnameisthedaemonssource-levelname,primarilyforthelog
gingID,*i.e."ZEBRA"or"BGP"**notethatthismacroisalsoalatch-onpointforotherchanges
(e.g.*upcomingmodulesupport)thatneedtoplacesomeper-daemonthings.Each*daemonshoul
dhaveoneofthese.*/#defineFRR_DAEMON_INFO(execname,constname,...)\staticstructfrr
_daemon_infoexecname##_di={.name=#execname,\.logname=#constname,\.module=THIS_MO
DULE,\__VA_ARGS__};\FRR_COREMOD_SETUP(.name=#execname,\.description=#execname"da
emon",\.version=FRR_VERSION,)\/*end*/externvoidfrr_preinit(structfrr_daemon_info
*daemon,intargc,char**argv);externvoidfrr_opt_add(constchar*optstr,conststructop
tion*longopts,constchar*helpstr);externintfrr_getopt(intargc,char*constargv[],in
t*longindex);externvoidfrr_help_exit(intstatus);externstructthread_master*frr_in
it(void);DECLARE_HOOK(frr_late_init,(structthread_master*tm),(tm))externvoidfrr_
config_fork(void);externvoidfrr_vty_serv(void);/*note:containscalltofrr_vty_serv
()*/externvoidfrr_run(structthread_master*master);externboolfrr_zclient_addr(str
uctsockaddr_storage*sa,socklen_t*sa_len,constchar*path);/*thesetwoarebeforethepr
otocoldaemondoesitsownshutdown*it'snamedthiswaybeingthecounterparttofrr_late_ini
t*/DECLARE_KOOH(frr_early_fini,(),())externvoidfrr_early_fini(void);/*andthesetw
oareafterthedaemondiditsowncleanup*/DECLARE_KOOH(frr_fini,(),())externvoidfrr_fi
ni(void);externcharconfig_default[256];externcharfrr_zclientpath[256];externcons
tcharfrr_sysconfdir[];externconstcharfrr_vtydir[];externconstcharfrr_moduledir[]
;externcharfrr_protoname[];externcharfrr_protonameinst[];externbooldebug_memstat
s_at_exit;#endif/*_ZEBRA_FRR_H*/