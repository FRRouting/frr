/**NexthopGroupstructuredefinition.*Copyright(C)2018CumulusNetworks,Inc.*DonaldS
harp**Thisprogramisfreesoftware;youcanredistributeitand/ormodifyit*undertheterms
oftheGNUGeneralPublicLicenseaspublishedbytheFree*SoftwareFoundation;eitherversio
n2oftheLicense,or(atyouroption)*anylaterversion.**Thisprogramisdistributedintheh
opethatitwillbeuseful,butWITHOUT*ANYWARRANTY;withouteventheimpliedwarrantyofMERC
HANTABILITYor*FITNESSFORAPARTICULARPURPOSE.SeetheGNUGeneralPublicLicensefor*more
details.**YoushouldhavereceivedacopyoftheGNUGeneralPublicLicensealong*withthispr
ogram;seethefileCOPYING;ifnot,writetotheFreeSoftware*Foundation,Inc.,51FranklinS
t,FifthFloor,Boston,MA02110-1301USA*/#ifndef__NEXTHOP_GROUP__#define__NEXTHOP_GR
OUP__#include<vty.h>/**Whatisanexthopgroup?**Anexthopgroupisacollectionofnexthop
sthatmakeup*theECMPpathfortheroute.**Thismoduleprovidesaproperabstractiontothisi
dea.*/structnexthop_group{structnexthop*nexthop;};structnexthop_group*nexthop_gr
oup_new(void);voidnexthop_group_delete(structnexthop_group**nhg);voidnexthop_add
(structnexthop**target,structnexthop*nexthop);voidnexthop_del(structnexthop_grou
p*nhg,structnexthop*nexthop);voidcopy_nexthops(structnexthop**tnh,structnexthop*
nh,structnexthop*rparent);/*Thefollowingforloopallowstoiterateoverthenexthop*str
uctureofroutes.**head:Thepointertothefirstnexthopinthechain.**nexthop:Thepointer
tothecurrentnexthop,eitherinthe*top-levelchainorinaresolvedchain.*/#defineALL_NE
XTHOPS(head,nhop)\(nhop)=(head.nexthop);\(nhop);\(nhop)=nexthop_next(nhop)struct
nexthop_group_cmd{RB_ENTRY(nexthop_group_cmd)nhgc_entry;charname[80];structnexth
op_groupnhg;QOBJ_FIELDS};RB_HEAD(nhgc_entry_head,nexthp_group_cmd);RB_PROTOTYPE(
nhgc_entry_head,nexthop_group_cmd,nhgc_entry,nexthop_group_cmd_compare)DECLARE_Q
OBJ_TYPE(nexthop_group_cmd)/**Initializenexthop_groups.Ifyouareinterestedinwhen*
anexthop_groupisadded/deleted/modified,thensetthe*appropriatecallbackfunctionsto
handleitinyour*code*/voidnexthop_group_init(void(*new)(constchar*name),void(*add
_nexthop)(conststructnexthop_group_cmd*nhgc,conststructnexthop*nhop),void(*del_n
exthop)(conststructnexthop_group_cmd*nhgc,conststructnexthop*nhop),void(*delete)
(constchar*name));externstructnexthop*nexthop_exists(structnexthop_group*nhg,str
uctnexthop*nh);externstructnexthop_group_cmd*nhgc_find(constchar*name);externvoi
dnexthop_group_write_nexthop(structvty*vty,structnexthop*nh);#endif