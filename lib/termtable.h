/**ASCIItablegenerator.*Copyright(C)2017CumulusNetworks*QuentinYoung**Thisprogra
misfreesoftware;youcanredistributeitand/ormodifyit*underthetermsoftheGNUGeneralP
ublicLicenseaspublishedbytheFree*SoftwareFoundation;eitherversion2oftheLicense,o
r(atyouroption)*anylaterversion.**Thisprogramisdistributedinthehopethatitwillbeu
seful,butWITHOUT*ANYWARRANTY;withouteventheimpliedwarrantyofMERCHANTABILITYor*FI
TNESSFORAPARTICULARPURPOSE.SeetheGNUGeneralPublicLicensefor*moredetails.**Yousho
uldhavereceivedacopyoftheGNUGeneralPublicLicensealong*withthisprogram;seethefile
COPYING;ifnot,writetotheFreeSoftware*Foundation,Inc.,51FranklinSt,FifthFloor,Bos
ton,MA02110-1301USA*/#ifndef_TERMTABLE_H_#define_TERMTABLE_H_#include<zebra.h>en
umttable_align{LEFT,RIGHT,TOP,BOTTOM,};structttable_border{chartop;charbottom;ch
arleft;charright;booltop_on;boolbottom_on;boolleft_on;boolright_on;};/*cellstyle
andcell*/structttable_cellstyle{shortlpad;shortrpad;enumttable_alignalign;struct
ttable_borderborder;};structttable_cell{char*text;structttable_cellstylestyle;};
/*tablestyleandtable*/structttable_style{charcorner;/*intersection*/intindent;/*
lefttableindent*/boolrownums_on;/*showrownumbers;unimplemented*/structttable_bor
derborder;structttable_cellstylecell;};structttable{intnrows;/*numberofrows*/int
ncols;/*numberofcols*/structttable_cell**table;/*table,rowxcol*/size_tsize;/*siz
e*/structttable_stylestyle;/*style*/};/*somepredefinedstyles*/#defineTTSTYLE_ASC
II0#defineTTSTYLE_BLANK1externstructttable_stylettable_styles[2];/***Createsanew
tablewiththedefaultstyle,whichlookslikethis:**+----------+----------+*|column1|c
olumn2|*+----------+----------+*|data...|data!!|*+----------+----------+*|datums
|12345|*+----------+----------+**@returnthecreatedtable*/structttable*ttable_new
(structttable_style*tts);/***Deletesatableandreleasesallassociatedresources.**@p
aramttthetabletodestroy*/voidttable_del(structttable*tt);/***Deletesanindividual
cell.**@paramcellthecelltodestroy*/voidttable_cell_del(structttable_cell*cell);/
***Insertsanewrowatthegivenindex.**Therowcontentsaredeterminedbyaformatstring.Th
eformatstringhas*thesameformasaregularprintfformatstring,exceptthatcolumnsare*de
limitedby'|'.Forexample,tomakethefirstcolumnofthetableabove,*thecallis:**ttable_
insert_row(<tt>,<n>,"%s|%s","column1","column2");**Allfeaturesofprintfformatstri
ngsarepermissiblehere.**Caveats:*-Atpresentyoucannotinsert'|'intoacell'scontents
.*-IfthereareNcolumns,'|'mustappearn-1timesortherowwillnotbe*created**@paramttta
bletoinsertrowinto*@paramrowtherownumber(beginsat0)*@paramformatcolumn-separated
formatstring*@param...argumentstoformatstring**@returnpointertothefirstcellinthe
createdrow,orNULLifnotenough*columnswerespecified*/structttable_cell*ttable_inse
rt_row(structttable*tt,unsignedintrow,constchar*format,...)PRINTF_ATTRIBUTE(3,4)
;/***Insertsanewrowattheendofthetable.**Therowcontentsaredeterminedbyaformatstri
ng.Theformatstringhas*thesameformasaregularprintfformatstring,exceptthatcolumnsa
re*delimitedby'|'.Forexample,tomakethefirstcolumnofthetableabove,*thecallis:**tt
able_add_row(<tt>,"%s|%s","column1","column2");**Allfeaturesofprintfformatstring
sarepermissiblehere.**Caveats:*-Atpresentyoucannotinsert'|'intoacell'scontents.*
-IfthereareNcolumns,'|'mustappearn-1timesortherowwillnotbe*created**@paramtttabl
etoinsertrowinto*@paramformatcolumn-separatedformatstring*@param...argumentstofo
rmatstring**@returnpointertothefirstcellinthecreatedrow,orNULLifnotenough*column
swerespecified*/structttable_cell*ttable_add_row(structttable*tt,constchar*forma
t,...)PRINTF_ATTRIBUTE(2,3);/***Removesarowfromthetable.**@paramtttabletodeleter
owfrom*@paramrowtherownumber(beginsat0)*/voidttable_del_row(structttable*tt,unsi
gnedintrow);/***Setsalignmentforarangeofcells.**AvailablealignmentsareLEFTandRIG
HT.Cellcontentswillbealigned*accordingly,whilerespectingpadding(ifany).Supposeac
ellhas:**lpad=1*rpad=1*align=RIGHT*text='datums'**Thecellwouldlooklike:**+------
-------------+*|datums|*+-------------------+**Ontheotherhand:**lpad=1*rpad=10*a
lign=RIGHT*text='datums'**+-------------------+*|datums|*+-------------------+**
ThedefaultalignmentisLEFT.**@paramttthetabletosetalignmenton*@paramsrowstartingr
owindex*@paramscolstartingcolumnindex*@paramnrow#rowstoalign*@paramncol#colstoal
ign*@paramalignthealignmenttoset*/voidttable_align(structttable*tt,unsignedintsr
ow,unsignedintscol,unsignedinterow,unsignedintecol,enumttable_alignalign);/***Se
tspaddingforarangeofcells.**AvailablepaddingoptionsareLEFTandRIGHT(thealignmente
numisreused).*Bothoptionsmaybeset.Paddingistreatedasthoughitisstucktothe*wallsof
thecell.Supposeacellhas:**lpad=4*rpad=2*align=RIGHT*text='datums'**Thecellpaddin
g,markedby'.',wouldlooklike:**+--------------+*|.datums.|*+--------------+**Ifth
ecolumniswiderthanthecell,thecellcontentsarealignedinan*additionalpaddedfieldacc
ordingtothecellalignment.**+--------------------+*|Data!!!11!~~~~~:-)|*+--------
------------+*|.datums.|*+--------------------+**@paramttthetabletosetpaddingon*
@paramsrowstartingrowindex*@paramscolstartingcolumnindex*@paramnrow#rowstopad*@p
aramncol#colstopad*@paramalignLEFTorRIGHT*@parampad#spacestopadwith*/voidttable_
pad(structttable*tt,unsignedintsrow,unsignedintscol,unsignedintnrow,unsignedintn
col,enumttable_alignalign,shortpad);/***Restyleallcellsaccordingtotable.cell.sty
le.**@paramtttabletorestyle*/voidttable_restyle(structttable*tt);/***Turnleft/ri
ghtcolumnseparatorsonoroffforspecifiedcolumn.**@paramtttable*@paramcolcolumninde
x*@paramalignleftorrightseparators*@paramontrue/falseforon/off*@paramsepcharacte
rtouse*/voidttable_colseps(structttable*tt,unsignedintcol,enumttable_alignalign,
boolon,charsep);/***Turnbottomrowseparatorsonoroffforspecifiedrow.**@paramtttabl
e*@paramrowrowindex*@paramalignleftorrightseparators*@paramontrue/falseforon/off
*@paramsepcharactertouse*/voidttable_rowseps(structttable*tt,unsignedintrow,enum
ttable_alignalign,boolon,charsep);/***Dumpsatabletoaheap-allocatedstring.**Calle
rmustfreethisstringafterusewith**XFREE(MTYPE_TMP,str);**@paramttthetabletodump*@
paramnewlinethedesirednewlinesequencetouse,nullterminated.*@returntableintextfor
m*/char*ttable_dump(structttable*tt,constchar*newline);#endif/*_TERMTABLE_H*/