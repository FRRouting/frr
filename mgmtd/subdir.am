#
# mgmtd -- Mangagement Daemon
#

# dist_examples_DATA += \
	# end
vtysh_scan += \
	mgmtd/mgmt_vty.c \
	# endif

vtysh_daemons += mgmtd

# man8 += $(MANBUILD)/frr-mgmtd.8
# endif

$(mgmtd_mgmtd_OBJECTS): yang/frr-staticd.yang.c
CLEANFILES += yang/frr-staticd.yang.c

clippy_scan += \
	mgmtd/mgmt_vty.c \
	# end

lib_LTLIBRARIES += mgmtd/libmgmt_bcknd_nb.la
nodist_mgmtd_libmgmt_bcknd_nb_la_SOURCES = \
	yang/frr-staticd.yang.c \
	staticd/static_vty.c \
	staticd/static_nb.c \
	staticd/static_nb_config.c \
	# end
mgmtd_libmgmt_bcknd_nb_la_CFLAGS = $(AM_CFLAGS) -DINCLUDE_MGMTD_CMDDEFS_ONLY -DINCLUDE_MGMTD_VALIDATE_ONLY
mgmtd_libmgmt_bcknd_nb_la_CPPFLAGS = $(AM_CPPFLAGS) -DINCLUDE_MGMTD_CMDDEFS_ONLY -DINCLUDE_MGMTD_VALIDATE_ONLY
mgmtd_libmgmt_bcknd_nb_la_LDFLAGS = -version-info 0:0:0
mgmtd_libmgmt_bcknd_nb_la_LIBADD = lib/libfrr.la

noinst_LIBRARIES += mgmtd/libmgmtd.a
mgmtd_libmgmtd_a_SOURCES = \
	mgmtd/mgmt.c \
	mgmtd/mgmt_memory.c \
	mgmtd/mgmt_db.c \
	mgmtd/mgmt_vty.c \
	mgmtd/mgmt_bcknd_server.c \
	mgmtd/mgmt_bcknd_adapter.c \
	mgmtd/mgmt_frntnd_server.c \
	mgmtd/mgmt_frntnd_adapter.c \
	mgmtd/mgmt_trxn.c \
	# end

noinst_HEADERS += \
	mgmtd/mgmt.h \
	mgmtd/mgmt_memory.h \
	mgmtd/mgmt_bcknd_adapter.h \
	mgmtd/mgmt_bcknd_server.h \
	mgmtd/mgmt_db.h \
	mgmtd/mgmt_vty.h \
	mgmtd/mgmt_frntnd_adapter.h \
	mgmtd/mgmt_frntnd_server.h \
	mgmtd/mgmt_trxn.h \
	# end

sbin_PROGRAMS += mgmtd/mgmtd

mgmtd_mgmtd_SOURCES = \
	mgmtd/mgmt_main.c \
	# end
mgmtd_mgmtd_CFLAGS = $(AM_CFLAGS) -I ./
mgmtd_mgmtd_LDADD = mgmtd/libmgmtd.a lib/libfrr.la $(LIBCAP) $(LIBM) $(LIBYANG_LIBS) $(UST_LIBS)
mgmtd_mgmtd_LDADD += mgmtd/libmgmt_bcknd_nb.la
