/**Zebranexthoptrackingheader*Copyright(C)2013CumulusNetworks,Inc.**Thisfileispa
rtofGNUZebra.**GNUZebraisfreesoftware;youcanredistributeitand/ormodifyit*underth
etermsoftheGNUGeneralPublicLicenseaspublishedbythe*FreeSoftwareFoundation;either
version2,or(atyouroption)any*laterversion.**GNUZebraisdistributedinthehopethatit
willbeuseful,but*WITHOUTANYWARRANTY;withouteventheimpliedwarrantyof*MERCHANTABIL
ITYorFITNESSFORAPARTICULARPURPOSE.SeetheGNU*GeneralPublicLicenseformoredetails.*
*YoushouldhavereceivedacopyoftheGNUGeneralPublicLicensealong*withthisprogram;see
thefileCOPYING;ifnot,writetotheFreeSoftware*Foundation,Inc.,51FranklinSt,FifthFl
oor,Boston,MA02110-1301USA*/#ifndef_ZEBRA_RNH_H#define_ZEBRA_RNH_H#include"prefi
x.h"#include"vty.h"/*Nexthopstructure.*/structrnh{uint8_tflags;#defineZEBRA_NHT_
CONNECTED0x1#defineZEBRA_NHT_DELETED0x2#defineZEBRA_NHT_EXACT_MATCH0x4/*VRFident
ifier.*/vrf_id_tvrf_id;structroute_entry*state;structprefixresolved_route;struct
list*client_list;structlist*zebra_static_route_list;/*staticroutesdependentonthi
sNH*/structlist*zebra_pseudowire_list;/*pseudowiresdependentonthisNH*/structrout
e_node*node;intfiltered[ZEBRA_ROUTE_MAX];/*ifthishasbeenfilteredforclient*/};typ
edefenum{RNH_NEXTHOP_TYPE,RNH_IMPORT_CHECK_TYPE}rnh_type_t;externintzebra_rnh_ip
_default_route;externintzebra_rnh_ipv6_default_route;staticinlineintrnh_resolve_
via_default(intfamily){if(((family==AF_INET)&&zebra_rnh_ip_default_route)||((fam
ily==AF_INET6)&&zebra_rnh_ipv6_default_route))return1;elsereturn0;}externstructr
nh*zebra_add_rnh(structprefix*p,vrf_id_tvrfid,rnh_type_ttype);externstructrnh*ze
bra_lookup_rnh(structprefix*p,vrf_id_tvrfid,rnh_type_ttype);externvoidzebra_free
_rnh(structrnh*rnh);externvoidzebra_delete_rnh(structrnh*rnh,rnh_type_ttype);ext
ernvoidzebra_add_rnh_client(structrnh*rnh,structzserv*client,rnh_type_ttype,vrf_
id_tvrfid);externvoidzebra_register_rnh_static_nh(vrf_id_t,structprefix*,structr
oute_node*);externvoidzebra_deregister_rnh_static_nexthops(vrf_id_t,structnextho
p*nexthop,structroute_node*rn);externvoidzebra_deregister_rnh_static_nh(vrf_id_t
,structprefix*,structroute_node*);externvoidzebra_register_rnh_pseudowire(vrf_id
_t,structzebra_pw*);externvoidzebra_deregister_rnh_pseudowire(vrf_id_t,structzeb
ra_pw*);externvoidzebra_remove_rnh_client(structrnh*rnh,structzserv*client,rnh_t
ype_ttype);externvoidzebra_evaluate_rnh(vrf_id_tvrfid,intfamily,intforce,rnh_typ
e_ttype,structprefix*p);externvoidzebra_print_rnh_table(vrf_id_tvrfid,intfamily,
structvty*vty,rnh_type_t);externchar*rnh_str(structrnh*rnh,char*buf,intsize);ext
ernintzebra_cleanup_rnh_client(vrf_id_tvrf,intfamily,structzserv*client,rnh_type
_ttype);#endif/*_ZEBRA_RNH_H*/