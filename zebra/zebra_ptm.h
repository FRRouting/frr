/**Definitionsforprescriptivetopologymodule(PTM).*Copyright(C)1998,99,2000Kunihi
roIshiguro,ToshiakiTakada**ThisfileispartofGNUZebra.**GNUZebraisfreesoftware;you
canredistributeitand/ormodifyit*underthetermsoftheGNUGeneralPublicLicenseaspubli
shedbythe*FreeSoftwareFoundation;eitherversion2,or(atyouroption)any*laterversion
.**GNUZebraisdistributedinthehopethatitwillbeuseful,but*WITHOUTANYWARRANTY;witho
uteventheimpliedwarrantyof*MERCHANTABILITYorFITNESSFORAPARTICULARPURPOSE.SeetheG
NU*GeneralPublicLicenseformoredetails.**YoushouldhavereceivedacopyoftheGNUGenera
lPublicLicensealong*withthisprogram;seethefileCOPYING;ifnot,writetotheFreeSoftwa
re*Foundation,Inc.,51FranklinSt,FifthFloor,Boston,MA02110-1301USA*/#ifndef_ZEBRA
_PTM_H#define_ZEBRA_PTM_HexternconstcharZEBRA_PTM_SOCK_NAME[];#defineZEBRA_PTM_M
AX_SOCKBUF3200/*25B*128ports*/#defineZEBRA_PTM_SEND_MAX_SOCKBUF512#defineZEBRA_P
TM_BFD_CLIENT_FLAG_REG(1<<1)/*clientregisteredwithBFD*/#include"zebra/zserv.h"/*
Zebraptmcontextblock*/structzebra_ptm_cb{intptm_sock;/*ptmfiledescriptor.*/struc
tbuffer*wb;/*Bufferofdatawaitingtobewrittentoptm.*/structthread*t_read;/*Threadf
orread*/structthread*t_write;/*Threadforwrite*/structthread*t_timer;/*Threadfort
imer*/char*out_data;char*in_data;intreconnect_time;intptm_enable;intpid;uint8_tc
lient_flags[ZEBRA_ROUTE_MAX];};#defineZEBRA_PTM_STATUS_DOWN0#defineZEBRA_PTM_STA
TUS_UP1#defineZEBRA_PTM_STATUS_UNKNOWN2/*Forinterfaceptm-enableconfiguration.*/#
defineZEBRA_IF_PTM_ENABLE_OFF0#defineZEBRA_IF_PTM_ENABLE_ON1#defineZEBRA_IF_PTM_
ENABLE_UNSPEC2voidzebra_ptm_init(void);voidzebra_ptm_finish(void);intzebra_ptm_c
onnect(structthread*t);voidzebra_ptm_write(structvty*vty);intzebra_ptm_get_enabl
e_state(void);/*ZAPImessagehandlers*/voidzebra_ptm_bfd_dst_register(ZAPI_HANDLER
_ARGS);voidzebra_ptm_bfd_dst_deregister(ZAPI_HANDLER_ARGS);voidzebra_ptm_bfd_cli
ent_register(ZAPI_HANDLER_ARGS);voidzebra_ptm_show_status(structvty*vty,structin
terface*ifp);voidzebra_ptm_if_init(structzebra_if*zebra_ifp);voidzebra_ptm_if_se
t_ptm_state(structinterface*ifp,structzebra_if*zebra_ifp);voidzebra_ptm_if_write
(structvty*vty,structzebra_if*zebra_ifp);voidzebra_ptm_bfd_client_deregister(int
proto);#endif