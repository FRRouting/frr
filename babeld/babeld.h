/*Copyright(c)2007,2008byJuliuszChroboczekCopyright2011byMatthieuBoutierandJuliu
szChroboczekPermissionisherebygranted,freeofcharge,toanypersonobtainingacopyofth
issoftwareandassociateddocumentationfiles(the"Software"),todealintheSoftwarewith
outrestriction,includingwithoutlimitationtherightstouse,copy,modify,merge,publis
h,distribute,sublicense,and/orsellcopiesoftheSoftware,andtopermitpersonstowhomth
eSoftwareisfurnishedtodoso,subjecttothefollowingconditions:Theabovecopyrightnoti
ceandthispermissionnoticeshallbeincludedinallcopiesorsubstantialportionsoftheSof
tware.THESOFTWAREISPROVIDED"ASIS",WITHOUTWARRANTYOFANYKIND,EXPRESSORIMPLIED,INCL
UDINGBUTNOTLIMITEDTOTHEWARRANTIESOFMERCHANTABILITY,FITNESSFORAPARTICULARPURPOSEA
NDNONINFRINGEMENT.INNOEVENTSHALLTHEAUTHORSORCOPYRIGHTHOLDERSBELIABLEFORANYCLAIM,
DAMAGESOROTHERLIABILITY,WHETHERINANACTIONOFCONTRACT,TORTOROTHERWISE,ARISINGFROM,
OUTOFORINCONNECTIONWITHTHESOFTWAREORTHEUSEOROTHERDEALINGSINTHESOFTWARE.*/#ifndef
BABEL_BABELD_H#defineBABEL_BABELD_H#include<zebra.h>#include"vty.h"#defineINFINI
TY((unsignedshort)(~0))#ifndefRTPROT_BABEL#defineRTPROT_BABEL42#endif#defineRTPR
OT_BABEL_LOCAL-2#undefMAX#undefMIN#defineMAX(x,y)((x)<=(y)?(y):(x))#defineMIN(x,
y)((x)<=(y)?(x):(y))#ifdefined(__STDC_VERSION__)&&__STDC_VERSION__>=199901L/*not
hing*/#elifdefined(__GNUC__)#defineinline__inline#if(__GNUC__>=3)#definerestrict
__restrict#else#definerestrict/**/#endif#else#defineinline/**/#definerestrict/**
/#endif#ifdefined(__GNUC__)&&(__GNUC__>=3)#defineATTRIBUTE(x)__attribute__(x)#de
fineLIKELY(_x)__builtin_expect(!!(_x),1)#defineUNLIKELY(_x)__builtin_expect(!!(_
x),0)#else#defineATTRIBUTE(x)/**/#defineLIKELY(_x)!!(_x)#defineUNLIKELY(_x)!!(_x
)#endif#ifdefined(__GNUC__)&&(__GNUC__>=4)&&(__GNUC_MINOR__>=3)#defineCOLD__attr
ibute__((cold))#else#defineCOLD/**/#endif#ifndefIF_NAMESIZE#include<sys/socket.h
>#include<net/if.h>#endif#ifdefHAVE_VALGRIND#include<valgrind/memcheck.h>#else#i
fndefVALGRIND_MAKE_MEM_UNDEFINED#defineVALGRIND_MAKE_MEM_UNDEFINED(a,b)do{}while
(0)#endif#ifndefVALGRIND_CHECK_MEM_IS_DEFINED#defineVALGRIND_CHECK_MEM_IS_DEFINE
D(a,b)do{}while(0)#endif#endif#defineBABEL_VTY_PORT2609#defineBABEL_DEFAULT_CONF
IG"babeld.conf"/*Valuesinmilliseconds*/#defineBABEL_DEFAULT_HELLO_INTERVAL4000#d
efineBABEL_DEFAULT_UPDATE_INTERVAL16000#defineBABEL_DEFAULT_RESEND_DELAY2000/*In
unitsofseconds*/#defineBABEL_DEFAULT_SMOOTHING_HALF_LIFE4/*Inunitsof1/256.*/#def
ineBABEL_DEFAULT_DIVERSITY_FACTOR256#defineBABEL_DEFAULT_RXCOST_WIRED96#defineBA
BEL_DEFAULT_RXCOST_WIRELESS256/*Babelstructure.*/structbabel{/*Babelthreads.*/st
ructthread*t_read;/*onBabelprotocol'ssocket*/structthread*t_update;/*timers*/};e
xternstructzebra_privs_tbabeld_privs;externvoidbabeld_quagga_init(void);externin
tinput_filter(constunsignedchar*id,constunsignedchar*prefix,unsignedshortplen,co
nstunsignedchar*neigh,unsignedintifindex);externintoutput_filter(constunsignedch
ar*id,constunsignedchar*prefix,unsignedshortplen,unsignedintifindex);externintre
distribute_filter(constunsignedchar*prefix,unsignedshortplen,unsignedintifindex,
intproto);externintresize_receive_buffer(intsize);externvoidschedule_neighbours_
check(intmsecs,intoverride);#endif/*BABEL_BABELD_H*/