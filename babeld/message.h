/*Copyright(c)2007,2008byJuliuszChroboczekPermissionisherebygranted,freeofcharge
,toanypersonobtainingacopyofthissoftwareandassociateddocumentationfiles(the"Soft
ware"),todealintheSoftwarewithoutrestriction,includingwithoutlimitationtherights
touse,copy,modify,merge,publish,distribute,sublicense,and/orsellcopiesoftheSoftw
are,andtopermitpersonstowhomtheSoftwareisfurnishedtodoso,subjecttothefollowingco
nditions:Theabovecopyrightnoticeandthispermissionnoticeshallbeincludedinallcopie
sorsubstantialportionsoftheSoftware.THESOFTWAREISPROVIDED"ASIS",WITHOUTWARRANTYO
FANYKIND,EXPRESSORIMPLIED,INCLUDINGBUTNOTLIMITEDTOTHEWARRANTIESOFMERCHANTABILITY
,FITNESSFORAPARTICULARPURPOSEANDNONINFRINGEMENT.INNOEVENTSHALLTHEAUTHORSORCOPYRI
GHTHOLDERSBELIABLEFORANYCLAIM,DAMAGESOROTHERLIABILITY,WHETHERINANACTIONOFCONTRAC
T,TORTOROTHERWISE,ARISINGFROM,OUTOFORINCONNECTIONWITHTHESOFTWAREORTHEUSEOROTHERD
EALINGSINTHESOFTWARE.*/#ifndefBABEL_MESSAGE_H#defineBABEL_MESSAGE_H#include"babe
l_interface.h"#defineMAX_BUFFERED_UPDATES200#defineBUCKET_TOKENS_MAX200#defineBU
CKET_TOKENS_PER_SEC40/*AregistryofassignedTLVandsub-TLVtypesisavailableathttp://
www.pps.univ-paris-diderot.fr/~jch/software/babel/babel-tlv-registry.text*/#defi
neMESSAGE_PAD10#defineMESSAGE_PADN1#defineMESSAGE_ACK_REQ2#defineMESSAGE_ACK3#de
fineMESSAGE_HELLO4#defineMESSAGE_IHU5#defineMESSAGE_ROUTER_ID6#defineMESSAGE_NH7
#defineMESSAGE_UPDATE8#defineMESSAGE_REQUEST9#defineMESSAGE_MH_REQUEST10#defineM
ESSAGE_MAX10/*Protocolextensionthroughsub-TLVs.*/#defineSUBTLV_PAD10#defineSUBTL
V_PADN1#defineSUBTLV_DIVERSITY2/*Alsoknownasbabelz.*/#defineSUBTLV_TIMESTAMP3/*U
sedtocomputeRTT.*/externunsignedshortmyseqno;externintbroadcast_ihu;externintspl
it_horizon;externstructneighbour*unicast_neighbour;externstructtimevalunicast_fl
ush_timeout;voidparse_packet(constunsignedchar*from,structinterface*ifp,constuns
ignedchar*packet,intpacketlen);voidflushbuf(structinterface*ifp);voidflushupdate
s(structinterface*ifp);voidsend_ack(structneighbour*neigh,unsignedshortnonce,uns
ignedshortinterval);voidsend_hello_noupdate(structinterface*ifp,unsignedinterval
);voidsend_hello(structinterface*ifp);voidflush_unicast(intdofree);voidsend_upda
te(structinterface*ifp,inturgent,constunsignedchar*prefix,unsignedcharplen);void
send_update_resend(structinterface*ifp,constunsignedchar*prefix,unsignedcharplen
);voidsend_wildcard_retraction(structinterface*ifp);voidupdate_myseqno(void);voi
dsend_self_update(structinterface*ifp);voidsend_ihu(structneighbour*neigh,struct
interface*ifp);voidsend_marginal_ihu(structinterface*ifp);voidsend_request(struc
tinterface*ifp,constunsignedchar*prefix,unsignedcharplen);voidsend_unicast_reque
st(structneighbour*neigh,constunsignedchar*prefix,unsignedcharplen);voidsend_mul
tihop_request(structinterface*ifp,constunsignedchar*prefix,unsignedcharplen,unsi
gnedshortseqno,constunsignedchar*id,unsignedshorthop_count);voidsend_unicast_mul
tihop_request(structneighbour*neigh,constunsignedchar*prefix,unsignedcharplen,un
signedshortseqno,constunsignedchar*id,unsignedshorthop_count);voidsend_request_r
esend(structneighbour*neigh,constunsignedchar*prefix,unsignedcharplen,unsignedsh
ortseqno,unsignedchar*id);voidhandle_request(structneighbour*neigh,constunsigned
char*prefix,unsignedcharplen,unsignedcharhop_count,unsignedshortseqno,constunsig
nedchar*id);#endif