/*Copyright(c)2007,2008byJuliuszChroboczekPermissionisherebygranted,freeofcharge
,toanypersonobtainingacopyofthissoftwareandassociateddocumentationfiles(the"Soft
ware"),todealintheSoftwarewithoutrestriction,includingwithoutlimitationtherights
touse,copy,modify,merge,publish,distribute,sublicense,and/orsellcopiesoftheSoftw
are,andtopermitpersonstowhomtheSoftwareisfurnishedtodoso,subjecttothefollowingco
nditions:Theabovecopyrightnoticeandthispermissionnoticeshallbeincludedinallcopie
sorsubstantialportionsoftheSoftware.THESOFTWAREISPROVIDED"ASIS",WITHOUTWARRANTYO
FANYKIND,EXPRESSORIMPLIED,INCLUDINGBUTNOTLIMITEDTOTHEWARRANTIESOFMERCHANTABILITY
,FITNESSFORAPARTICULARPURPOSEANDNONINFRINGEMENT.INNOEVENTSHALLTHEAUTHORSORCOPYRI
GHTHOLDERSBELIABLEFORANYCLAIM,DAMAGESOROTHERLIABILITY,WHETHERINANACTIONOFCONTRAC
T,TORTOROTHERWISE,ARISINGFROM,OUTOFORINCONNECTIONWITHTHESOFTWAREORTHEUSEOROTHERD
EALINGSINTHESOFTWARE.*/#ifndefBABEL_NEIGHBOUR_H#defineBABEL_NEIGHBOUR_Hstructnei
ghbour{structneighbour*next;/*Thisis-1whenunknown,sodon'tmakeitunsigned*/inthell
o_seqno;unsignedcharaddress[16];unsignedshortreach;unsignedshorttxcost;structtim
evalhello_time;structtimevalihu_time;unsignedshorthello_interval;/*incentisecond
s*/unsignedshortihu_interval;/*incentiseconds*//*UsedforRTTestimation.*//*Absolu
tetime(modulo2^32)atwhichtheHellowassent,accordingtoremoteclock.*/unsignedinthel
lo_send_us;structtimevalhello_rtt_receive_time;unsignedintrtt;structtimevalrtt_t
ime;structinterface*ifp;};externstructneighbour*neighs;#defineFOR_ALL_NEIGHBOURS
(_neigh)\for(_neigh=neighs;_neigh;_neigh=_neigh->next)intneighbour_valid(structn
eighbour*neigh);voidflush_neighbour(structneighbour*neigh);structneighbour*find_
neighbour(constunsignedchar*address,structinterface*ifp);intupdate_neighbour(str
uctneighbour*neigh,inthello,inthello_interval);unsignedcheck_neighbours(void);un
signedneighbour_txcost(structneighbour*neigh);unsignedneighbour_rxcost(structnei
ghbour*neigh);unsignedneighbour_rttcost(structneighbour*neigh);unsignedneighbour
_cost(structneighbour*neigh);intvalid_rtt(structneighbour*neigh);#endif/*BABEL_N
EIGHBOUR_H*/