/**IS-ISRout(e)ingprotocol-LSPHash**Copyright(C)2017ChristianFranke**Thisfileisp
artofFreeRangeRouting(FRR)**FRRisfreesoftware;youcanredistributeitand/ormodifyit
*underthetermsoftheGNUGeneralPublicLicenseaspublishedbythe*FreeSoftwareFoundatio
n;eitherversion2,or(atyouroption)any*laterversion.**FRRisdistributedinthehopetha
titwillbeuseful,but*WITHOUTANYWARRANTY;withouteventheimpliedwarrantyof*MERCHANTA
BILITYorFITNESSFORAPARTICULARPURPOSE.SeetheGNU*GeneralPublicLicenseformoredetail
s.**YoushouldhavereceivedacopyoftheGNUGeneralPublicLicensealong*withthisprogram;
seethefileCOPYING;ifnot,writetotheFreeSoftware*Foundation,Inc.,51FranklinSt,Fift
hFloor,Boston,MA02110-1301USA*/#include<zebra.h>#include"hash.h"#include"jhash.h
"#include"isisd/isis_memory.h"#include"isisd/isis_flags.h"#include"dict.h"#inclu
de"isisd/isis_circuit.h"#include"isisd/isis_lsp.h"#include"isisd/isis_lsp_hash.h
"DEFINE_MTYPE_STATIC(ISISD,LSP_HASH,"ISISLSPHash")structisis_lsp_hash{structhash
*h;};staticunsignedlsp_hash_key(void*lp){structisis_lsp*lsp=lp;returnjhash(lsp->
hdr.lsp_id,ISIS_SYS_ID_LEN+2,0x55aa5a5a);}staticintlsp_hash_cmp(constvoid*a,cons
tvoid*b){conststructisis_lsp*la=a,*lb=b;return0==memcmp(la->hdr.lsp_id,lb->hdr.l
sp_id,ISIS_SYS_ID_LEN+2);}structisis_lsp_hash*isis_lsp_hash_new(void){structisis
_lsp_hash*rv=XCALLOC(MTYPE_LSP_HASH,sizeof(*rv));rv->h=hash_create(lsp_hash_key,
lsp_hash_cmp,NULL);returnrv;}voidisis_lsp_hash_clean(structisis_lsp_hash*ih){has
h_clean(ih->h,NULL);}voidisis_lsp_hash_free(structisis_lsp_hash*ih){isis_lsp_has
h_clean(ih);hash_free(ih->h);}structisis_lsp*isis_lsp_hash_lookup(structisis_lsp
_hash*ih,structisis_lsp*lsp){returnhash_lookup(ih->h,lsp);}voidisis_lsp_hash_add
(structisis_lsp_hash*ih,structisis_lsp*lsp){structisis_lsp*inserted;inserted=has
h_get(ih->h,lsp,hash_alloc_intern);assert(inserted==lsp);}voidisis_lsp_hash_rele
ase(structisis_lsp_hash*ih,structisis_lsp*lsp){hash_release(ih->h,lsp);}