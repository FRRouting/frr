/**OSPFLSDBsupport.*Copyright(C)1999,2000AlexZinin,KunihiroIshiguro,ToshiakiTaka
da**ThisfileispartofGNUZebra.**GNUZebraisfreesoftware;youcanredistributeitand/or
modifyit*underthetermsoftheGNUGeneralPublicLicenseaspublishedbythe*FreeSoftwareF
oundation;eitherversion2,or(atyouroption)any*laterversion.**GNUZebraisdistribute
dinthehopethatitwillbeuseful,but*WITHOUTANYWARRANTY;withouteventheimpliedwarrant
yof*MERCHANTABILITYorFITNESSFORAPARTICULARPURPOSE.SeetheGNU*GeneralPublicLicense
formoredetails.**YoushouldhavereceivedacopyoftheGNUGeneralPublicLicensealong*wit
hthisprogram;seethefileCOPYING;ifnot,writetotheFreeSoftware*Foundation,Inc.,51Fr
anklinSt,FifthFloor,Boston,MA02110-1301USA*/#ifndef_ZEBRA_OSPF_LSDB_H#define_ZEB
RA_OSPF_LSDB_H/*OSPFLSDBstructure.*/structospf_lsdb{struct{unsignedlongcount;uns
ignedlongcount_self;unsignedintchecksum;structroute_table*db;}type[OSPF_MAX_LSA]
;unsignedlongtotal;#defineMONITOR_LSDB_CHANGE1/*XXX*/#ifdefMONITOR_LSDB_CHANGE/*
Hooksforcallbackfunctionstocatcheveryadd/delevent.*/int(*new_lsa_hook)(structosp
f_lsa*);int(*del_lsa_hook)(structospf_lsa*);#endif/*MONITOR_LSDB_CHANGE*/};/*Mac
ros.*/#defineLSDB_LOOP(T,N,L)\if((T)!=NULL)\for((N)=route_top((T));((N));((N))=r
oute_next((N)))\if(((L)=(N)->info))#defineROUTER_LSDB(A)((A)->lsdb->type[OSPF_RO
UTER_LSA].db)#defineNETWORK_LSDB(A)((A)->lsdb->type[OSPF_NETWORK_LSA].db)#define
SUMMARY_LSDB(A)((A)->lsdb->type[OSPF_SUMMARY_LSA].db)#defineASBR_SUMMARY_LSDB(A)
((A)->lsdb->type[OSPF_ASBR_SUMMARY_LSA].db)#defineEXTERNAL_LSDB(O)((O)->lsdb->ty
pe[OSPF_AS_EXTERNAL_LSA].db)#defineNSSA_LSDB(A)((A)->lsdb->type[OSPF_AS_NSSA_LSA
].db)#defineOPAQUE_LINK_LSDB(A)((A)->lsdb->type[OSPF_OPAQUE_LINK_LSA].db)#define
OPAQUE_AREA_LSDB(A)((A)->lsdb->type[OSPF_OPAQUE_AREA_LSA].db)#defineOPAQUE_AS_LS
DB(O)((O)->lsdb->type[OSPF_OPAQUE_AS_LSA].db)#defineAREA_LSDB(A,T)((A)->lsdb->ty
pe[(T)].db)#defineAS_LSDB(O,T)((O)->lsdb->type[(T)].db)/*OSPFLSDBrelatedfunction
s.*/externstructospf_lsdb*ospf_lsdb_new(void);externvoidospf_lsdb_init(structosp
f_lsdb*);externvoidospf_lsdb_free(structospf_lsdb*);externvoidospf_lsdb_cleanup(
structospf_lsdb*);externvoidls_prefix_set(structprefix_ls*lp,structospf_lsa*lsa)
;externvoidospf_lsdb_add(structospf_lsdb*,structospf_lsa*);externvoidospf_lsdb_d
elete(structospf_lsdb*,structospf_lsa*);externvoidospf_lsdb_delete_all(structosp
f_lsdb*);/*Setallstatsto-1(LSA_SPF_NOT_EXPLORED).*/externvoidospf_lsdb_clean_sta
t(structospf_lsdb*lsdb);externstructospf_lsa*ospf_lsdb_lookup(structospf_lsdb*,s
tructospf_lsa*);externstructospf_lsa*ospf_lsdb_lookup_by_id(structospf_lsdb*,uin
t8_t,structin_addr,structin_addr);externstructospf_lsa*ospf_lsdb_lookup_by_id_ne
xt(structospf_lsdb*,uint8_t,structin_addr,structin_addr,int);externunsignedlongo
spf_lsdb_count_all(structospf_lsdb*);externunsignedlongospf_lsdb_count(structosp
f_lsdb*,int);externunsignedlongospf_lsdb_count_self(structospf_lsdb*,int);extern
unsignedintospf_lsdb_checksum(structospf_lsdb*,int);externunsignedlongospf_lsdb_
isempty(structospf_lsdb*);#endif/*_ZEBRA_OSPF_LSDB_H*/