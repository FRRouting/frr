/**ThisisanimplementationofRFC4970RouterInformation*withsupportofRFC5088PCECapab
ilitesannouncement*andsupportofdraft-ietf-ospf-segment-routing-extensions-18*for
SegmentRoutingCapabilitiesannouncement***Modulename:RouterInformation*Author:Oli
vierDugeon<olivier.dugeon@orange.com>*Copyright(C)2012-2017OrangeLabshttp://www.
orange.com/**ThisfileispartofGNUZebra.**GNUZebraisfreesoftware;youcanredistribut
eitand/ormodifyit*underthetermsoftheGNUGeneralPublicLicenseaspublishedbythe*Free
SoftwareFoundation;eitherversion2,or(atyouroption)any*laterversion.**GNUZebraisd
istributedinthehopethatitwillbeuseful,but*WITHOUTANYWARRANTY;withouteventheimpli
edwarrantyof*MERCHANTABILITYorFITNESSFORAPARTICULARPURPOSE.SeetheGNU*GeneralPubl
icLicenseformoredetails.**YoushouldhavereceivedacopyoftheGNUGeneralPublicLicense
along*withthisprogram;seethefileCOPYING;ifnot,writetotheFreeSoftware*Foundation,
Inc.,51FranklinSt,FifthFloor,Boston,MA02110-1301USA*/#ifndef_ZEBRA_OSPF_ROUTER_I
NFO_H#define_ZEBRA_OSPF_ROUTER_INFO_H/**OpaqueLSA'slinkstateIDforRouterInformati
onis*structuredasfollows.**241680*+--------+--------+--------+--------+*|4|MBZ|.
.......|........|*+--------+--------+--------+--------+*|<-Type->|<Resv'd>|<--In
stance--->|***Type:IANAhasassigned'4'forRouterInformation.*MBZ:Reserved,mustbese
ttozero.*Instance:Usermayselectanarbitrary16-bitvalue.**//**241680*+--------+---
-----+--------+--------+---*|LSage|Options|9,10,11|A*+--------+--------+--------
+--------+|*|4|0|Instance||*+--------+--------+--------+--------+|*|Advertisingr
outer||Standard(Opaque)LSAheader;*+--------+--------+--------+--------+|Type9,10
or11areused.*|LSsequencenumber||*+--------+--------+--------+--------+|*|LScheck
sum|Length|V*+--------+--------+--------+--------+---*|Type|Length|ATLVpartforRo
uterInformation;*+--------+--------+--------+--------+|Valuesmightbe*|Values...|
Vstructuredasasetofsub-TLVs.*+--------+--------+--------+--------+---*//**Follow
ingsectiondefinesTLVbodyparts.*//*Uptonow,11codepointshavebeenassignedtoRouterIn
formation*//*Onlytype1RouterCapabilitiesand6PCEaresupportedwiththiscode*/#define
RI_IANA_MAX_TYPE11/*RFC4970:RouterInformationCapabilitiesTLV*//*Mandatory*/#defi
neRI_TLV_CAPABILITIES1structri_tlv_router_cap{structtlv_headerheader;/*Valueleng
this4bytes.*/uint32_tvalue;};/*Capabilitiesbitsareleftalign*/#defineRI_GRACE_RES
TART0x80000000#defineRI_GRACE_HELPER0x40000000#defineRI_STUB_SUPPORT0x20000000#d
efineRI_TE_SUPPORT0x10000000#defineRI_P2P_OVER_LAN0x08000000#defineRI_TE_EXPERIM
ENTAL0x04000000#defineRI_TLV_LENGTH4/*RFC5088:PCECapabilitiesTLV*//*Optional*//*
RIPCETLV*/#defineRI_TLV_PCE6structri_tlv_pce{structtlv_headerheader;/*AsetofPCE-
sub-TLVswillfollow.*/};/*PCEAddressSub-TLV*//*Mandatory*/#defineRI_PCE_SUBTLV_AD
DRESS1structri_pce_subtlv_address{/*Type=1;Lengthis8(IPv4)or20(IPv6)bytes.*/stru
cttlv_headerheader;#definePCE_ADDRESS_LENGTH_IPV48#definePCE_ADDRESS_LENGTH_IPV6
20struct{uint16_ttype;/*Addresstype:1=IPv4,2=IPv6*/#definePCE_ADDRESS_TYPE_IPV41
#definePCE_ADDRESS_TYPE_IPV62uint16_treserved;structin_addrvalue;/*PCEaddress*/}
address;};/*PCEPath-ScopeSub-TLV*//*Mandatory*/#defineRI_PCE_SUBTLV_PATH_SCOPE2s
tructri_pce_subtlv_path_scope{structtlv_headerheader;/*Type=2;Length=4bytes.*//*
*L,R,Rd,S,Sd,Y,PrefL,PrefR,PrefSandPrefYbits:*seeRFC5088page9*/uint32_tvalue;};/
*PCEDomainSub-TLV*//*Optional*/#defineRI_PCE_SUBTLV_DOMAIN3#definePCE_DOMAIN_TYP
E_AREA1#definePCE_DOMAIN_TYPE_AS2structri_pce_subtlv_domain{structtlv_headerhead
er;/*Type=3;Length=8bytes.*/uint16_ttype;/*Domaintype:1=OSPFAreaID,2=ASNumber*/u
int16_treserved;uint32_tvalue;};/*PCENeighborSub-TLV*//*MandatoryifRorSbitisset*
/#defineRI_PCE_SUBTLV_NEIGHBOR4structri_pce_subtlv_neighbor{structtlv_headerhead
er;/*Type=4;Length=8bytes.*/uint16_ttype;/*Domaintype:1=OSPFAreaID,2=ASNumber*/u
int16_treserved;uint32_tvalue;};/*PCECapabilitiesFlagsSub-TLV*//*Optional*/#defi
neRI_PCE_SUBTLV_CAP_FLAG5#definePCE_CAP_GMPLS_LINK0x0001#definePCE_CAP_BIDIRECTI
ONAL0x0002#definePCE_CAP_DIVERSE_PATH0x0004#definePCE_CAP_LOAD_BALANCE0x0008#def
inePCE_CAP_SYNCHRONIZED0x0010#definePCE_CAP_OBJECTIVES0x0020#definePCE_CAP_ADDIT
IVE0x0040#definePCE_CAP_PRIORIZATION0x0080#definePCE_CAP_MULTIPLE_REQ0x0100struc
tri_pce_subtlv_cap_flag{structtlv_headerheader;/*Type=5;Length=nx4bytes.*/uint32
_tvalue;};/*StructuretosharefloodingscopeinfoforSegmentRouting*/structscope_info
{uint8_tscope;structin_addrarea_id;};/*Prototypes.*/externintospf_router_info_in
it(void);externvoidospf_router_info_term(void);externvoidospf_router_info_finish
(void);externintospf_router_info_enable(void);externvoidospf_router_info_update_
sr(boolenable,structsr_srgbsrgb,uint8_tmsd);externstructscope_infoospf_router_in
fo_get_flooding_scope(void);#endif/*_ZEBRA_OSPF_ROUTER_INFO_H*/