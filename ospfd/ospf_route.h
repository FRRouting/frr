/**OSPFroutingtable.*Copyright(C)1999,2000ToshiakiTakada**ThisfileispartofGNUZeb
ra.**GNUZebraisfreesoftware;youcanredistributeitand/ormodifyit*underthetermsofth
eGNUGeneralPublicLicenseaspublishedbythe*FreeSoftwareFoundation;eitherversion2,o
r(atyouroption)any*laterversion.**GNUZebraisdistributedinthehopethatitwillbeusef
ul,but*WITHOUTANYWARRANTY;withouteventheimpliedwarrantyof*MERCHANTABILITYorFITNE
SSFORAPARTICULARPURPOSE.SeetheGNU*GeneralPublicLicenseformoredetails.**Youshould
havereceivedacopyoftheGNUGeneralPublicLicensealong*withthisprogram;seethefileCOP
YING;ifnot,writetotheFreeSoftware*Foundation,Inc.,51FranklinSt,FifthFloor,Boston
,MA02110-1301USA*/#ifndef_ZEBRA_OSPF_ROUTE_H#define_ZEBRA_OSPF_ROUTE_H#defineOSP
F_DESTINATION_ROUTER1#defineOSPF_DESTINATION_NETWORK2#defineOSPF_DESTINATION_DIS
CARD3#defineOSPF_PATH_MIN0#defineOSPF_PATH_INTRA_AREA1#defineOSPF_PATH_INTER_ARE
A2#defineOSPF_PATH_TYPE1_EXTERNAL3#defineOSPF_PATH_TYPE2_EXTERNAL4#defineOSPF_PA
TH_MAX5/*OSPFPath.*/structospf_path{structin_addrnexthop;structin_addradv_router
;ifindex_tifindex;unsignedcharunnumbered;};/*Belowisthestructurelinkedtoeveryrou
tenode.NotethatforNetworkroutingentriesasingleospf_routeiskept,whileforABRsandAS
BRs(Routerroutingentries),welinkaninstanceofospf_router_routewherealistofpathsis
maintained,sonr->infoisa(structospf_route*)forOSPF_DESTINATION_NETWORKbutnr->inf
oisa(structospf_router_route*)forOSPF_DESTINATION_ROUTER*/structroute_standard{/
*LinkSateOrigin.*/structlsa_header*origin;/*AssociatedArea.*/structin_addrarea_i
d;/*Theareatheroutebelongsto*//*AreaType*/intexternal_routing;/*OptionalCapabili
ty.*/uint8_toptions;/*GetfromLSAheader.*//**/uint8_tflags;/*Fromrouter-LSA*/};st
ructroute_external{/*LinkStateOrigin.*/structospf_lsa*origin;/*LinkStateCostType
2.*/uint32_ttype2_cost;/*Tagvalue.*/uint32_ttag;/*ASBRroute.*/structospf_route*a
sbr;};structospf_route{/*DestinationType.*/uint8_ttype;/*DestinationID.*//*i.e.L
inkStateID.*/structin_addrid;/*AddressMask.*/structin_addrmask;/*Onlyvalidfornet
works.*//*PathType.*/uint8_tpath_type;/*ListofPaths.*/structlist*paths;/*LinkSta
teCost.*/uint32_tcost;/*i.e.metric.*//*Routespecificinfo.*/union{structroute_sta
ndardstd;structroute_externalext;}u;};externstructospf_path*ospf_path_new(void);
externvoidospf_path_free(structospf_path*);externstructospf_path*ospf_path_looku
p(structlist*,structospf_path*);externstructospf_route*ospf_route_new(void);exte
rnvoidospf_route_free(structospf_route*);externvoidospf_route_delete(structospf*
,structroute_table*);externvoidospf_route_table_free(structroute_table*);externv
oidospf_route_install(structospf*,structroute_table*);externvoidospf_route_table
_dump(structroute_table*);externvoidospf_intra_add_router(structroute_table*,str
uctvertex*,structospf_area*);externvoidospf_intra_add_transit(structroute_table*
,structvertex*,structospf_area*);externvoidospf_intra_add_stub(structroute_table
*,structrouter_lsa_link*,structvertex*,structospf_area*,intparent_is_root,int);e
xternintospf_route_cmp(structospf*,structospf_route*,structospf_route*);externvo
idospf_route_copy_nexthops(structospf_route*,structlist*);externvoidospf_route_c
opy_nexthops_from_vertex(structospf_route*,structvertex*);externvoidospf_route_s
ubst(structroute_node*,structospf_route*,structospf_route*);externvoidospf_route
_add(structroute_table*,structprefix_ipv4*,structospf_route*,structospf_route*);
externvoidospf_route_subst_nexthops(structospf_route*,structlist*);externvoidosp
f_prune_unreachable_networks(structroute_table*);externvoidospf_prune_unreachabl
e_routers(structroute_table*);externintospf_add_discard_route(structospf*,struct
route_table*,structospf_area*,structprefix_ipv4*);externvoidospf_delete_discard_
route(structospf*,structroute_table*,structprefix_ipv4*);externintospf_route_mat
ch_same(structroute_table*,structprefix_ipv4*,structospf_route*);#endif/*_ZEBRA_
OSPF_ROUTE_H*/