/**OSPFcalculation.*Copyright(C)1999KunihiroIshiguro**ThisfileispartofGNUZebra.*
*GNUZebraisfreesoftware;youcanredistributeitand/ormodifyit*underthetermsoftheGNU
GeneralPublicLicenseaspublishedbythe*FreeSoftwareFoundation;eitherversion2,or(at
youroption)any*laterversion.**GNUZebraisdistributedinthehopethatitwillbeuseful,b
ut*WITHOUTANYWARRANTY;withouteventheimpliedwarrantyof*MERCHANTABILITYorFITNESSFO
RAPARTICULARPURPOSE.SeetheGNU*GeneralPublicLicenseformoredetails.**Youshouldhave
receivedacopyoftheGNUGeneralPublicLicensealong*withthisprogram;seethefileCOPYING
;ifnot,writetotheFreeSoftware*Foundation,Inc.,51FranklinSt,FifthFloor,Boston,MA0
2110-1301USA*/#ifndef_QUAGGA_OSPF_SPF_H#define_QUAGGA_OSPF_SPF_H/*valuesforverte
x->type*/#defineOSPF_VERTEX_ROUTER1/*foraRouter-LSA*/#defineOSPF_VERTEX_NETWORK2
/*foraNetwork-LSA*//*valuesforvertex->flags*/#defineOSPF_VERTEX_PROCESSED0x01/*T
he"root"isthenoderunningtheSPFcalculation*//*Arouterornetworkinanarea*/structver
tex{uint8_tflags;uint8_ttype;/*copiedfromLSAheader*/structin_addrid;/*copiedfrom
LSAheader*/structlsa_header*lsa;/*RouterorNetworkLSA*/int*stat;/*LinktoLSAstatus
.*/uint32_tdistance;/*fromroottothisvertex*/structlist*parents;/*listofparentsin
SPFtree*/structlist*children;/*listofchildreninSPFtree*/};/*Anexthoptakenonthero
otnodetogettothis(parent)vertex*/structvertex_nexthop{structospf_interface*oi;/*
outputintfonrootnode*/structin_addrrouter;/*routeraddresstosendto*/};structverte
x_parent{structvertex_nexthop*nexthop;/*linktonexthopinfoforthisparent*/structve
rtex*parent;/*parentvertex*/intbacklink;/*indexbacktoparentforrouter-lsa's*/};/*
WhattriggeredtheSPF?*/typedefenum{SPF_FLAG_ROUTER_LSA_INSTALL=1,SPF_FLAG_NETWORK
_LSA_INSTALL,SPF_FLAG_SUMMARY_LSA_INSTALL,SPF_FLAG_ASBR_SUMMARY_LSA_INSTALL,SPF_
FLAG_MAXAGE,SPF_FLAG_ABR_STATUS_CHANGE,SPF_FLAG_ASBR_STATUS_CHANGE,SPF_FLAG_CONF
IG_CHANGE,}ospf_spf_reason_t;externvoidospf_spf_calculate_schedule(structospf*,o
spf_spf_reason_t);externvoidospf_rtrs_free(structroute_table*);/*voidospf_spf_ca
lculate_timer_add();*/#endif/*_QUAGGA_OSPF_SPF_H*/