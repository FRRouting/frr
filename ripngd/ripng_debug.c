/**RIPngdebugoutputroutines*Copyright(C)1998KunihiroIshiguro**ThisfileispartofGN
UZebra.**GNUZebraisfreesoftware;youcanredistributeitand/ormodifyit*undertheterms
oftheGNUGeneralPublicLicenseaspublishedbythe*FreeSoftwareFoundation;eitherversio
n2,or(atyouroption)any*laterversion.**GNUZebraisdistributedinthehopethatitwillbe
useful,but*WITHOUTANYWARRANTY;withouteventheimpliedwarrantyof*MERCHANTABILITYorF
ITNESSFORAPARTICULARPURPOSE.SeetheGNU*GeneralPublicLicenseformoredetails.**Yoush
ouldhavereceivedacopyoftheGNUGeneralPublicLicensealong*withthisprogram;seethefil
eCOPYING;ifnot,writetotheFreeSoftware*Foundation,Inc.,51FranklinSt,FifthFloor,Bo
ston,MA02110-1301USA*/#include<zebra.h>#include"command.h"#include"ripngd/ripng_
debug.h"/*Fordebugstatement.*/unsignedlongripng_debug_event=0;unsignedlongripng_
debug_packet=0;unsignedlongripng_debug_zebra=0;DEFUN_NOSH(show_debugging_ripng,s
how_debugging_ripng_cmd,"showdebugging[ripng]",SHOW_STRDEBUG_STR"RIPngconfigurat
ion\n"){vty_out(vty,"RIPngdebuggingstatus:\n");if(IS_RIPNG_DEBUG_EVENT)vty_out(v
ty,"RIPngeventdebuggingison\n");if(IS_RIPNG_DEBUG_PACKET){if(IS_RIPNG_DEBUG_SEND
&&IS_RIPNG_DEBUG_RECV){vty_out(vty,"RIPngpacketdebuggingison\n");}else{if(IS_RIP
NG_DEBUG_SEND)vty_out(vty,"RIPngpacketsenddebuggingison\n");elsevty_out(vty,"RIP
ngpacketreceivedebuggingison\n");}}if(IS_RIPNG_DEBUG_ZEBRA)vty_out(vty,"RIPngzeb
radebuggingison\n");returnCMD_SUCCESS;}DEFUN(debug_ripng_events,debug_ripng_even
ts_cmd,"debugripngevents",DEBUG_STR"RIPngconfiguration\n""Debugoptionsetforripng
events\n"){ripng_debug_event=RIPNG_DEBUG_EVENT;returnCMD_SUCCESS;}DEFUN(debug_ri
png_packet,debug_ripng_packet_cmd,"debugripngpacket",DEBUG_STR"RIPngconfiguratio
n\n""Debugoptionsetforripngpacket\n"){ripng_debug_packet=RIPNG_DEBUG_PACKET;ripn
g_debug_packet|=RIPNG_DEBUG_SEND;ripng_debug_packet|=RIPNG_DEBUG_RECV;returnCMD_
SUCCESS;}DEFUN(debug_ripng_packet_direct,debug_ripng_packet_direct_cmd,"debugrip
ngpacket<recv|send>",DEBUG_STR"RIPngconfiguration\n""Debugoptionsetforripngpacke
t\n""Debugoptionsetforreceivepacket\n""Debugoptionsetforsendpacket\n"){intidx_re
cv_send=3;ripng_debug_packet|=RIPNG_DEBUG_PACKET;if(strcmp("send",argv[idx_recv_
send]->text)==0)ripng_debug_packet|=RIPNG_DEBUG_SEND;if(strcmp("recv",argv[idx_r
ecv_send]->text)==0)ripng_debug_packet|=RIPNG_DEBUG_RECV;returnCMD_SUCCESS;}DEFU
N(debug_ripng_zebra,debug_ripng_zebra_cmd,"debugripngzebra",DEBUG_STR"RIPngconfi
guration\n""Debugoptionsetforripngandzebracommunication\n"){ripng_debug_zebra=RI
PNG_DEBUG_ZEBRA;returnCMD_SUCCESS;}DEFUN(no_debug_ripng_events,no_debug_ripng_ev
ents_cmd,"nodebugripngevents",NO_STRDEBUG_STR"RIPngconfiguration\n""Debugoptions
etforripngevents\n"){ripng_debug_event=0;returnCMD_SUCCESS;}DEFUN(no_debug_ripng
_packet,no_debug_ripng_packet_cmd,"nodebugripngpacket",NO_STRDEBUG_STR"RIPngconf
iguration\n""Debugoptionsetforripngpacket\n"){ripng_debug_packet=0;returnCMD_SUC
CESS;}DEFUN(no_debug_ripng_packet_direct,no_debug_ripng_packet_direct_cmd,"nodeb
ugripngpacket<recv|send>",NO_STRDEBUG_STR"RIPngconfiguration\n""Debugoptionsetfo
rripngpacket\n""Debugoptionsetforreceivepacket\n""Debugoptionsetforsendpacket\n"
){intidx_recv_send=4;if(strcmp("send",argv[idx_recv_send]->text)==0){if(IS_RIPNG
_DEBUG_RECV)ripng_debug_packet&=~RIPNG_DEBUG_SEND;elseripng_debug_packet=0;}else
if(strcmp("recv",argv[idx_recv_send]->text)==0){if(IS_RIPNG_DEBUG_SEND)ripng_deb
ug_packet&=~RIPNG_DEBUG_RECV;elseripng_debug_packet=0;}returnCMD_SUCCESS;}DEFUN(
no_debug_ripng_zebra,no_debug_ripng_zebra_cmd,"nodebugripngzebra",NO_STRDEBUG_ST
R"RIPngconfiguration\n""Debugoptionsetforripngandzebracommunication\n"){ripng_de
bug_zebra=0;returnCMD_SUCCESS;}/*Debugnode.*/staticstructcmd_nodedebug_node={DEB
UG_NODE,"",/*Debugnodehasnointerface.*/1/*VTYSH*/};staticintconfig_write_debug(s
tructvty*vty){intwrite=0;if(IS_RIPNG_DEBUG_EVENT){vty_out(vty,"debugripngevents\
n");write++;}if(IS_RIPNG_DEBUG_PACKET){if(IS_RIPNG_DEBUG_SEND&&IS_RIPNG_DEBUG_RE
CV){vty_out(vty,"debugripngpacket\n");write++;}else{if(IS_RIPNG_DEBUG_SEND)vty_o
ut(vty,"debugripngpacketsend\n");elsevty_out(vty,"debugripngpacketrecv\n");write
++;}}if(IS_RIPNG_DEBUG_ZEBRA){vty_out(vty,"debugripngzebra\n");write++;}returnwr
ite;}voidripng_debug_reset(){ripng_debug_event=0;ripng_debug_packet=0;ripng_debu
g_zebra=0;}voidripng_debug_init(){ripng_debug_event=0;ripng_debug_packet=0;ripng
_debug_zebra=0;install_node(&debug_node,config_write_debug);install_element(VIEW
_NODE,&show_debugging_ripng_cmd);install_element(ENABLE_NODE,&debug_ripng_events
_cmd);install_element(ENABLE_NODE,&debug_ripng_packet_cmd);install_element(ENABL
E_NODE,&debug_ripng_packet_direct_cmd);install_element(ENABLE_NODE,&debug_ripng_
zebra_cmd);install_element(ENABLE_NODE,&no_debug_ripng_events_cmd);install_eleme
nt(ENABLE_NODE,&no_debug_ripng_packet_cmd);install_element(ENABLE_NODE,&no_debug
_ripng_packet_direct_cmd);install_element(ENABLE_NODE,&no_debug_ripng_zebra_cmd)
;install_element(CONFIG_NODE,&debug_ripng_events_cmd);install_element(CONFIG_NOD
E,&debug_ripng_packet_cmd);install_element(CONFIG_NODE,&debug_ripng_packet_direc
t_cmd);install_element(CONFIG_NODE,&debug_ripng_zebra_cmd);install_element(CONFI
G_NODE,&no_debug_ripng_events_cmd);install_element(CONFIG_NODE,&no_debug_ripng_p
acket_cmd);install_element(CONFIG_NODE,&no_debug_ripng_packet_direct_cmd);instal
l_element(CONFIG_NODE,&no_debug_ripng_zebra_cmd);}