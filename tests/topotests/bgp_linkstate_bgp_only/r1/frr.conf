!
hostname r1
!
! Router 1: AS65001, IPv4 iBGP with r2
!
debug bgp updates
debug bgp link-state
debug bgp zebra
debug bgp neighbor-events
debug bgp neighbor-events 10.255.1.2
debug bgp neighbor-events detail
!
interface lo
 ip address 10.1.1.1/32
!
interface r1-eth1
 description Link to r2
 ip address 172.16.1.1/30
!
interface r1-eth0
 description Point-to-point link to RR
 ip address 10.255.1.1/30
!
! Static route for BGP-LS Prefix NLRI
ip route 192.0.2.0/24 Null0
!
router bgp 65001
 bgp router-id 1.1.1.1
 no bgp ebgp-requires-policy
 no bgp default ipv4-unicast
 !
 ! iBGP neighbor (r2)
 neighbor 172.16.1.2 remote-as 65001
 neighbor 172.16.1.2 update-source r1-eth1
 !
 ! BGP-LS speaker
 neighbor 10.255.1.2 remote-as 65000
 !
 ! IPv4 unicast for iBGP session
 address-family ipv4 unicast
  neighbor 172.16.1.2 activate
  !neighbor 10.255.1.2 activate
  redistribute static
 exit-address-family
 !
 ! Link-State address family - export BGP topology to BGP-LS speaker
 address-family link-state link-state
  neighbor 10.255.1.2 activate
  redistribute bgp
  redistribute local
  redistribute connected
  redistribute static
 exit-address-family
!
end
