!debug zebra kernel
!debug zebra srv6
!debug bgp zebra

int r1-eth0
 ipv6 address fd00:0:0:2::1/64
 ip address 10.125.2.1/24
int r1-eth1
 ipv6 address fd00:0:0:3::1/64
 ip address 10.125.3.1/24
int r1-eth2
 ipv6 address fd00:0:0:4::1/64
 ip address 10.125.4.1/24
!

ipv6 route 2001:db8:1:3::/64 fd00:0:0:3::2

ip prefix-list BLOCK seq 1 deny 172.16.0.0/24
ip prefix-list BLOCK seq 2 deny 172.16.1.2/32
ip prefix-list BLOCK seq 3 deny 172.16.1.3/32
ip prefix-list BLOCK seq 4 deny 172.16.1.8/32
ip prefix-list BLOCK seq 255 permit any
route-map filter permit 20
 match ip address prefix-list BLOCK
exit

segment-routing
srv6
 locators
  locator default
   prefix 2001:db8:1:1::/64 block-len 40 node-len 24 func-bits 16

router bgp 65001
 bgp router-id 10.125.1.1
 no bgp ebgp-requires-policy
 no bgp network import-check
 neighbor fd00:0:0:2::2 remote-as external
 neighbor fd00:0:0:3::2 remote-as external
 neighbor fd00:0:0:4::2 remote-as external
 neighbor fd00:0:0:2::2 capability extended-nexthop
 segment-routing srv6
  locator default
 address-family ipv4 unicast
  network 10.0.0.1/32
  neighbor fd00:0:0:3::2 encapsulation-srv6
  neighbor fd00:0:0:2::2 encapsulation-srv6-relax
  sid export auto
 exit-address-family
 address-family ipv6 unicast
  neighbor fd00:0:0:2::2 activate
  neighbor fd00:0:0:2::2 encapsulation-srv6-relax
  neighbor fd00:0:0:3::2 activate
  neighbor fd00:0:0:3::2 encapsulation-srv6
  neighbor fd00:0:0:4::2 activate
 exit-address-family
!
