log commands
!
interface r2-eth0
 ip address 192.168.100.2/24
 ip pim
 ipv6 address 2001:db8:100::2/64
 ipv6 pim
exit
!
interface r2-eth1
 ip address 192.168.101.2/24
 ip pim
 ipv6 address 2001:db8:101::2/64
 ipv6 pim
exit
!
interface lo
 ip address 10.254.254.2/32
 ip igmp
 ip pim passive
 ipv6 address 2001:db8:ffff::2/128
 ipv6 mld
 ipv6 pim passive
!
router pim
 rp 10.254.254.2
 join-filter route-map pim-filter
exit
!
router pim6
 rp 2001:db8:ffff::2
 join-filter route-map pim6-filter
exit
!
ip prefix-list allowed-pim-groups seq 5 permit 225.0.0.1/32 le 32
ip prefix-list allowed-pim-groups seq 10 permit 225.0.0.2/32 le 32
!
route-map pim-filter permit 100
 match ip multicast-group prefix-list allowed-pim-groups
exit
!
route-map pim-filter permit 110
 match ip multicast-group 225.0.0.100
exit
!
route-map pim-filter permit 120
 match ip multicast-group 225.0.0.200
 match multicast-interface r2-eth1
exit
!
route-map pim-filter permit 130
 match ip multicast-group 232.0.1.1
 match ip multicast-source 192.168.101.10
exit
!
ipv6 prefix-list allowed-pim6-groups seq 5 permit ff05::100/128 le 128
ipv6 prefix-list allowed-pim6-groups seq 10 permit ff05::200/128 le 128
!
route-map pim6-filter permit 100
 match ipv6 multicast-group prefix-list allowed-pim6-groups
exit
!
route-map pim6-filter permit 110
 match ipv6 multicast-group ff05::1000
exit
!
route-map pim6-filter permit 120
 match ipv6 multicast-group ff05::2000
 match multicast-interface r2-eth1
exit
!
route-map pim6-filter permit 130
 match ipv6 multicast-group ff35::100
 match ipv6 multicast-source 2001:db8:101::100
exit
