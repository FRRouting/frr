!
! BGP instance for the default VRF
router bgp 65001
 bgp router-id 192.0.2.2
 ! Peer with the loopback addresses for default VRF sessions
 neighbor 10.10.0.1 remote-as 65001
 neighbor fd00::1 remote-as 65001
 neighbor PEER_GROUP_1 peer-group
 neighbor PEER_GROUP_1 remote-as 65001
 neighbor PEER_GROUP_2 peer-group
 neighbor PEER_GROUP_2 remote-as 65001
 neighbor PEER_GROUP_3 peer-group
 neighbor PEER_GROUP_3 remote-as 65001
 neighbor PEER_GROUP_4 peer-group
 neighbor PEER_GROUP_4 remote-as 65001
 neighbor 10.10.1.1 peer-group PEER_GROUP_4
 neighbor 10.10.2.1 peer-group PEER_GROUP_3
 neighbor fd00:1::1 peer-group PEER_GROUP_2
 neighbor fd00:2::1 peer-group PEER_GROUP_1
 !
 ! Advertise a prefix in the default IPv4 unicast family
 address-family ipv4 unicast
  network 192.0.2.2/32
  network 192.168.10.0/24
  network 192.168.20.0/24
  network 192.168.30.0/24
  neighbor 10.10.0.1 maximum-prefix 10
  neighbor fd00::1 maximum-prefix 10
  neighbor PEER_GROUP_4 maximum-prefix 10
  neighbor PEER_GROUP_3 maximum-prefix 10
  neighbor PEER_GROUP_2 maximum-prefix 10
  neighbor PEER_GROUP_1 maximum-prefix 10
 exit-address-family
 !
 ! Advertise a prefix in the default IPv6 unicast family
 address-family ipv6 unicast
  neighbor fd00::1 activate
  neighbor fd00::1 maximum-prefix 10
  neighbor PEER_GROUP_1 activate
  neighbor PEER_GROUP_1 maximum-prefix 10
  neighbor PEER_GROUP_2 activate
  neighbor PEER_GROUP_2 maximum-prefix 10
  network fd01:2::1/128
 exit-address-family
!
! BGP instance specifically for the RED VRF
router bgp 65001 vrf RED
 bgp router-id 10.10.3.2
 ! Peer with the neighbor on the dedicated VRF link
 neighbor 10.10.3.1 remote-as 65001
 neighbor VRF_PEER_GROUP_1 peer-group
 neighbor VRF_PEER_GROUP_1 remote-as 65001
 neighbor VRF_PEER_GROUP_2 peer-group
 neighbor VRF_PEER_GROUP_2 remote-as 65001
 neighbor 10.10.5.1 peer-group VRF_PEER_GROUP_1
 neighbor 10.10.4.1 peer-group VRF_PEER_GROUP_2
 !
 address-family ipv4 unicast
  redistribute connected
 exit-address-family
 !
 address-family ipv6 unicast
  redistribute connected
 exit-address-family
!
agentx