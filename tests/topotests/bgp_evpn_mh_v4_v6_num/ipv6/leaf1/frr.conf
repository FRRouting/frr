frr defaults datacenter
service integrated-vtysh-config
hostname leaf1
log syslog informational
!
interface lo
 description Loopback
 ip address 10.0.0.13/32
 ipv6 address 2001:db8:200::13/128
!
interface leaf1-eth0
 description leaf1-eth0 -> spine1-eth0
 ipv6 address 2001:db8:50::0/127
!
interface leaf1-eth1
 description leaf1-eth1 -> spine2-eth0
 ipv6 address 2001:db8:60::0/127
!
interface leaf1-eth2
 description leaf1-eth2 -> torm11-eth0
 ipv6 address 2001:db8:1::1/127
!
interface leaf1-eth3
 description leaf1-eth3 -> torm12-eth0
 ipv6 address 2001:db8:2::1/127
!
interface leaf1-eth4
 description leaf1-eth4 -> torm21-eth0
 ipv6 address 2001:db8:3::1/127
!
interface leaf1-eth5
 description leaf1-eth5 -> torm22-eth0
 ipv6 address 2001:db8:4::1/127
!
router bgp 65101
 bgp router-id 10.0.0.13
 bgp bestpath as-path multipath-relax
 no bgp default ipv4-unicast
 neighbor SPINE peer-group
 neighbor SPINE remote-as 65001
 neighbor SPINE capability extended-nexthop
 neighbor SPINE timers 3 10
 neighbor TOR peer-group
 neighbor TOR capability extended-nexthop
 neighbor TOR timers 3 10
 neighbor 2001:db8:50::1 peer-group SPINE
 neighbor 2001:db8:60::1 peer-group SPINE
 neighbor 2001:db8:1::0 remote-as 65002
 neighbor 2001:db8:1::0 peer-group TOR
 neighbor 2001:db8:2::0 remote-as 65003
 neighbor 2001:db8:2::0 peer-group TOR
 neighbor 2001:db8:3::0 remote-as 65004
 neighbor 2001:db8:3::0 peer-group TOR
 neighbor 2001:db8:4::0 remote-as 65005
 neighbor 2001:db8:4::0 peer-group TOR
 !
 address-family ipv4 unicast
  neighbor SPINE activate
  neighbor TOR activate
  redistribute connected
 exit-address-family
 !
 address-family ipv6 unicast
  neighbor SPINE activate
  neighbor TOR activate
  redistribute connected
 exit-address-family
 !
 address-family l2vpn evpn
  neighbor SPINE activate
  neighbor TOR activate
 exit-address-family
!
end
