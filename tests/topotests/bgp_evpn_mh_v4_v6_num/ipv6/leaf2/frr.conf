frr defaults datacenter
service integrated-vtysh-config
hostname leaf2
log syslog informational
!
interface lo
 description Loopback
 ip address 10.0.0.14/32
 ipv6 address 2001:db8:200::14/128
!
interface leaf2-eth0
 description leaf2-eth0 -> spine1-eth1
 ipv6 address 2001:db8:51::0/127
!
interface leaf2-eth1
 description leaf2-eth1 -> spine2-eth1
 ipv6 address 2001:db8:61::0/127
!
interface leaf2-eth2
 description leaf2-eth2 -> torm11-eth1
 ipv6 address 2001:db8:5::1/127
!
interface leaf2-eth3
 description leaf2-eth3 -> torm12-eth1
 ipv6 address 2001:db8:6::1/127
!
interface leaf2-eth4
 description leaf2-eth4 -> torm21-eth1
 ipv6 address 2001:db8:7::1/127
!
interface leaf2-eth5
 description leaf2-eth5 -> torm22-eth1
 ipv6 address 2001:db8:8::1/127
!
router bgp 65101
 bgp router-id 10.0.0.14
 bgp bestpath as-path multipath-relax
 no bgp default ipv4-unicast
 neighbor SPINE peer-group
 neighbor SPINE remote-as 65001
 neighbor SPINE capability extended-nexthop
 neighbor SPINE timers 3 10
 neighbor TOR peer-group
 neighbor TOR capability extended-nexthop
 neighbor TOR timers 3 10
 neighbor 2001:db8:51::1 peer-group SPINE
 neighbor 2001:db8:61::1 peer-group SPINE
 neighbor 2001:db8:5::0 remote-as 65002
 neighbor 2001:db8:5::0 peer-group TOR
 neighbor 2001:db8:6::0 remote-as 65003
 neighbor 2001:db8:6::0 peer-group TOR
 neighbor 2001:db8:7::0 remote-as 65004
 neighbor 2001:db8:7::0 peer-group TOR
 neighbor 2001:db8:8::0 remote-as 65005
 neighbor 2001:db8:8::0 peer-group TOR
 !
 address-family ipv4 unicast
  neighbor SPINE activate
  neighbor TOR activate
  redistribute connected
 exit-address-family
 !
 address-family ipv6 unicast
  neighbor SPINE activate
  neighbor TOR activate
  redistribute connected
 exit-address-family
 !
 address-family l2vpn evpn
  neighbor SPINE activate
  neighbor TOR activate
 exit-address-family
!
end
