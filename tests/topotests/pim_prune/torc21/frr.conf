! -*- conf -*-
!
! Torc21 Router Configuration
!
interface lo
 ip address 10.0.0.4/32
!
interface torc21-eth0
 ip address 10.0.15.4/24
 ip pim
 ip igmp
!
interface torc21-eth1
 ip address 10.0.17.4/24
 ip pim
!
interface torc21-eth2
 ip address 10.0.19.4/24
 ip pim
!
! Access list to match RP network (for (*,G) joins via spine2)
access-list MATCH_RP permit 10.0.0.0 0.0.0.255
!
! Access list to match source network (for SPT switchover via spine1)
access-list MATCH_SOURCE permit 10.0.14.0 0.0.0.255
!
router rip
 network 10.0.0.0/8
 redistribute connected
 ! Make spine1 path less preferred for RP routes, so torc21 uses spine2 for (*,G) joins
 ! This preserves the bug flow: torc21's (*,G) join goes to spine2
 offset-list MATCH_RP in 5 torc21-eth2
 ! Make spine2 path less preferred for SOURCE routes, so torc21 uses spine1 for SPT
 ! This enables SPT switchover: torc21 RPF for source goes via spine1
 offset-list MATCH_SOURCE in 5 torc21-eth1
!
router pim
 rp 10.0.0.1
 join-prune-interval 10
!
