frr defaults traditional

hostname r2
password zebra
log stdout notifications
log commands

log file bgpd.log debugging

router bgp 22
   bgp router-id 2.2.2.2
   bgp cluster-id 2.2.2.2
   no bgp ebgp-requires-policy
   no bgp default ipv4-unicast
   neighbor 10.0.1.1 remote-as 11
   neighbor 10.0.1.1 update-source 10.0.1.2
   neighbor 10.0.1.1 timers 10 30
   neighbor 10.0.2.1 remote-as 11
   neighbor 10.0.2.1 update-source 10.0.2.2
   neighbor 10.0.2.1 timers 10 30
   neighbor 10:10::10 remote-as 11
   neighbor 10:10::10 update-source 10:10::20
   neighbor 10:10::10 timers 10 30
   neighbor 10:10::10 capability extended-nexthop
   neighbor 10:20::10 remote-as 11
   neighbor 10:20::10 update-source 10:20::20
   neighbor 10:20::10 timers 10 30
   neighbor 10:20::10 capability extended-nexthop
   neighbor 1::1 remote-as 11
   neighbor 1::1 update-source 2::2
   neighbor 1::1 timers 10 30
   neighbor 1::1 ebgp-multihop 252
   neighbor 1::1 capability extended-nexthop
   neighbor 1000::1000 remote-as 11
   neighbor 1000::1000 update-source 2000::2000
   neighbor 1000::1000 timers 10 30
   neighbor 1000::1000 ebgp-multihop 252
   neighbor 1000::1000 capability extended-nexthop

   address-family ipv4 unicast
     network 2.2.2.2/32
     neighbor 10.0.1.1 activate
     neighbor 10.0.2.1 activate
   exit-address-family

   address-family ipv4 vpn
     neighbor 1::1 activate
     neighbor 1000::1000 activate
   exit-address-family

   address-family ipv6 unicast
     network 2::2/128
     network 2000::2000/128
     neighbor 10:10::10 activate
     neighbor 10:20::10 activate
   exit-address-family


router bgp 22 vrf r2-cust1
   bgp router-id 192.168.3.1
   no bgp ebgp-requires-policy
   neighbor 192.168.3.2 remote-as 3
   neighbor 192.168.3.2 update-source 192.168.3.1
   neighbor 192.168.3.2 timers 10 30
   srv6-locator a

   address-family ipv4 unicast
     neighbor 192.168.3.2 activate
     neighbor 192.168.3.2 next-hop-self
     rd vpn export 1:1
     rt vpn both 1:1
     import vpn
     export vpn
   exit-address-family
!
router bgp 22 vrf r2-cust2
   bgp router-id 192.168.4.1
   no bgp ebgp-requires-policy
   neighbor 192.168.4.2 remote-as 4
   neighbor 192.168.4.2 update-source 192.168.4.1
   neighbor 192.168.4.2 timers 10 30
   srv6-locator a

   address-family ipv4 unicast
     neighbor 192.168.4.2 activate
     neighbor 192.168.4.2 next-hop-self
     rd vpn export 2:2
     rt vpn both 2:2
     import vpn
     export vpn
   exit-address-family
!
end
