frr defaults traditional

hostname r1
password zebra
log stdout notifications
log commands

log file bgpd.log debugging
!
ip prefix-list ip_advertise seq 10 permit 1.1.1.1/32
ip prefix-list ip_redistribute seq 10 permit 10.201.0.0/24
ip prefix-list ip_redistribute seq 20 permit 10.201.1.0/24
ip prefix-list ip_redistribute seq 30 permit 10.201.2.0/24
ip prefix-list ip_redistribute seq 40 permit 10.201.3.0/24
ip prefix-list ip_redistribute seq 50 permit 10.201.4.0/24
ip prefix-list ip_redistribute seq 60 permit 10.201.5.0/24
ip prefix-list ip_redistribute seq 70 permit 10.201.6.0/24
ip prefix-list ip_redistribute seq 80 permit 10.201.7.0/24
ip prefix-list ip_redistribute seq 90 permit 10.201.8.0/24
ip prefix-list ip_redistribute seq 100 permit 10.201.9.0/24
!
ipv6 prefix-list ipv6_advertise seq 10 permit 1::1/128
!
route-map ip-advertise-map permit 5
 match ip address prefix-list ip_advertise
route-map ipv6-advertise-map permit 5
 match ipv6 address prefix-list ipv6_advertise
route-map ip-redistribute-map permit 5
 match ip address prefix-list ip_redistribute
!
router bgp 11
   bgp router-id 1.1.1.1
   bgp cluster-id 1.1.1.1
   no bgp ebgp-requires-policy
   no bgp default ipv4-unicast
   neighbor 10.0.1.2 remote-as 22
   neighbor 10.0.1.2 update-source 10.0.1.1
   neighbor 10.0.1.2 timers 10 30
   neighbor 10.0.2.2 remote-as 22
   neighbor 10.0.2.2 update-source 10.0.2.1
   neighbor 10.0.2.2 timers 10 30
   neighbor 10:10::20 remote-as 22
   neighbor 10:10::20 update-source 10:10::10
   neighbor 10:10::20 timers 10 30
   neighbor 10:10::20 capability extended-nexthop
   neighbor 10:20::20 remote-as 22
   neighbor 10:20::20 update-source 10:20::10
   neighbor 10:20::20 timers 10 30
   neighbor 10:20::20 capability extended-nexthop
   neighbor 2::2 remote-as 22
   neighbor 2::2 update-source 1::1
   neighbor 2::2 timers 10 30
   neighbor 2::2 ebgp-multihop 252
   neighbor 2::2 capability extended-nexthop
   neighbor 2000::2000 remote-as 22
   neighbor 2000::2000 update-source 1000::1000
   neighbor 2000::2000 timers 10 30
   neighbor 2000::2000 ebgp-multihop 252
   neighbor 2000::2000 capability extended-nexthop

   address-family ipv4 unicast
     network 1.1.1.1/32
     neighbor 10.0.1.2 activate
     neighbor 10.0.2.2 activate
   exit-address-family

   address-family ipv4 vpn
     neighbor 2::2 activate
     neighbor 2000::2000 activate
   exit-address-family

   address-family ipv6 unicast
     network 1::1/128
     network 1000::1000/128
     neighbor 10:10::20 activate
     neighbor 10:20::20 activate
   exit-address-family


router bgp 11 vrf r1-cust1
   bgp router-id 192.168.1.1
   no bgp ebgp-requires-policy
   neighbor 192.168.1.2 remote-as 1
   neighbor 192.168.1.2 update-source 192.168.1.1
   neighbor 192.168.1.2 timers 10 30
   srv6-locator a

   address-family ipv4 unicast
     neighbor 192.168.1.2 activate
     neighbor 192.168.1.2 next-hop-self
     rd vpn export 1:1
     rt vpn both 1:1
     import vpn
     export vpn
   exit-address-family
!
router bgp 11 vrf r1-cust2
   bgp router-id 192.168.2.1
   no bgp ebgp-requires-policy
   neighbor 192.168.2.2 remote-as 2
   neighbor 192.168.2.2 update-source 192.168.2.1
   neighbor 192.168.2.2 timers 10 30
   srv6-locator a

   address-family ipv4 unicast
     neighbor 192.168.2.2 activate
     neighbor 192.168.2.2 next-hop-self
     rd vpn export 2:2
     rt vpn both 2:2
     import vpn
     export vpn
   exit-address-family
!
end
