process announce-routes {
    run /etc/exabgp/exa-send.py;
    encoder text;
}

neighbor 192.168.1.1 {
    router-id 192.168.1.101;
    local-address 192.168.1.101;
    local-as 65002;
    peer-as 65001;

    family {
        ipv4 unicast;
        ipv6 unicast;
        l2vpn evpn;
    }

    api {
        processes [ announce-routes ];
    }

    static {
        # IPv4 Unicast Routes
        # Route 1: E-Tree Extended Community (RFC 8317) - IPv4 unicast
        # Extended Community (8 bytes): 06 05 00 00 00 00 00 00
        route 10.10.10.10/32 {
            next-hop 192.168.1.101;
            origin igp;
            extended-community [0x0605000000000000];
        }

        # Route 2: I-SID Extended Community - IPv4 unicast
        # Extended Community (8 bytes): 06 07 00 01 23 00 00 00
        route 10.10.10.11/32 {
            next-hop 192.168.1.101;
            origin igp;
            extended-community [0x0607000123000000];
        }

        # Route 3: Load Balancing Extended Community (EVPN encoding) - IPv4 unicast
        # Extended Community (8 bytes): 06 0e 00 00 01 00 00 64
        route 10.10.10.12/32 {
            next-hop 192.168.1.101;
            origin igp;
            extended-community [0x060e000001000064];
        }

        # Route 4: Load Balancing Extended Community (OPAQUE encoding) - IPv4 unicast
        # Extended Community (8 bytes): 03 0e 00 00 02 00 00 c8
        route 10.10.10.13/32 {
            next-hop 192.168.1.101;
            origin igp;
            extended-community [0x030e0000020000c8];
        }

        # Route 5: Multiple EVPN Extended Communities - IPv4 unicast
        route 10.10.10.14/32 {
            next-hop 192.168.1.101;
            origin igp;
            extended-community [0x0605000000000000 0x0607000456000000 0x060e0000030000ff];
        }

        # IPv6 Unicast Routes
        # Route 6: E-Tree Extended Community - IPv6 unicast
        route 2001:db8:10::10/128 {
            next-hop 2001:db8:1::101;
            origin igp;
            extended-community [0x0605000000000000];
        }

        # Route 7: I-SID Extended Community - IPv6 unicast
        route 2001:db8:10::11/128 {
            next-hop 2001:db8:1::101;
            origin igp;
            extended-community [0x0607000123000000];
        }

        # Route 8: Load Balancing Extended Community (EVPN encoding) - IPv6 unicast
        route 2001:db8:10::12/128 {
            next-hop 2001:db8:1::101;
            origin igp;
            extended-community [0x060e000001000064];
        }

        # EVPN Type-2 Routes (MAC/IP Advertisement) are announced via exa-send.py script
        # Route 9: E-Tree Extended Community - IPv4 EVPN Type-2
        # Route 10: I-SID Extended Community - IPv4 EVPN Type-2
        # Route 11: Load Balancing Extended Community (EVPN encoding) - IPv4 EVPN Type-2
        # Route 12: E-Tree Extended Community - IPv6 EVPN Type-2
        # Route 13: I-SID Extended Community - IPv6 EVPN Type-2
        # Route 14: Load Balancing Extended Community (EVPN encoding) - IPv6 EVPN Type-2
    }
}

