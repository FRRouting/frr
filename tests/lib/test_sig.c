/**ThisfileispartofQuagga.**Quaggaisfreesoftware;youcanredistributeitand/ormodif
yit*underthetermsoftheGNUGeneralPublicLicenseaspublishedbythe*FreeSoftwareFounda
tion;eitherversion2,or(atyouroption)any*laterversion.**Quaggaisdistributedintheh
opethatitwillbeuseful,but*WITHOUTANYWARRANTY;withouteventheimpliedwarrantyof*MER
CHANTABILITYorFITNESSFORAPARTICULARPURPOSE.SeetheGNU*GeneralPublicLicenseformore
details.**YoushouldhavereceivedacopyoftheGNUGeneralPublicLicensealong*withthispr
ogram;seethefileCOPYING;ifnot,writetotheFreeSoftware*Foundation,Inc.,51FranklinS
t,FifthFloor,Boston,MA02110-1301USA*/#include<zebra.h>#include<sigevent.h>#inclu
de"lib/log.h"#include"lib/memory.h"staticvoidsighup(void){printf("processedhup\n
");}staticvoidsigusr1(void){printf("processedusr1\n");}staticvoidsigusr2(void){p
rintf("processedusr2\n");}structquagga_signal_tsigs[]={{.signal=SIGHUP,.handler=
&sighup,},{.signal=SIGUSR1,.handler=&sigusr1,},{.signal=SIGUSR2,.handler=&sigusr
2,}};structthread_master*master;structthreadt;intmain(void){master=thread_master
_create(NULL);signal_init(master,array_size(sigs),sigs);openzlog("testsig","NONE
",0,LOG_CONS|LOG_NDELAY|LOG_PID,LOG_DAEMON);zlog_set_level(ZLOG_DEST_SYSLOG,ZLOG
_DISABLED);zlog_set_level(ZLOG_DEST_STDOUT,LOG_DEBUG);zlog_set_level(ZLOG_DEST_M
ONITOR,ZLOG_DISABLED);while(thread_fetch(master,&t))thread_call(&t);exit(0);}