/**Zlogtests.*Copyright(C)2018CumulusNetworks,Inc.*QuentinYoung**Thisprogramisfr
eesoftware;youcanredistributeitand/ormodifyit*underthetermsoftheGNUGeneralPublic
LicenseaspublishedbytheFree*SoftwareFoundation;eitherversion2oftheLicense,or(aty
ouroption)*anylaterversion.**Thisprogramisdistributedinthehopethatitwillbeuseful
,butWITHOUT*ANYWARRANTY;withouteventheimpliedwarrantyofMERCHANTABILITYor*FITNESS
FORAPARTICULARPURPOSE.SeetheGNUGeneralPublicLicensefor*moredetails.**Youshouldha
vereceivedacopyoftheGNUGeneralPublicLicensealong*withthisprogram;seethefileCOPYI
NG;ifnot,writetotheFreeSoftware*Foundation,Inc.,51FranklinSt,FifthFloor,Boston,M
A02110-1301USA*/#include<zebra.h>#include<memory.h>#include"log.h"/*maximumamoun
tofdatatohexdump*/#defineMAXDATA16384/**Testhexdumpfunctionality.**Atthemoment,n
otcrashingisconsideredsuccess.*/staticbooltest_zlog_hexdump(void){unsignedintnl=
1;do{longd[nl];for(unsignedinti=0;i<nl;i++)d[i]=random();zlog_hexdump(d,nl*sizeo
f(long));}while(++nl*sizeof(long)<=MAXDATA);returntrue;}bool(*tests[])(void)={te
st_zlog_hexdump,};intmain(intargc,char**argv){openzlog("testzlog","NONE",0,LOG_C
ONS|LOG_NDELAY|LOG_PID,LOG_ERR);zlog_set_file("test_zlog.log",LOG_DEBUG);for(uns
ignedinti=0;i<array_size(tests);i++)if(!tests[i]())return1;return0;}